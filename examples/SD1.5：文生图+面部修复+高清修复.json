{"last_node_id":54,"last_link_id":117,"nodes":[{"id":20,"type":"Reroute","pos":[2238.312652614899,1296.4635830810444],"size":[75,26],"flags":{},"order":17,"mode":0,"inputs":[{"name":"","type":"*","link":95,"slot_index":0,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[97],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false},"color":"#332922","bgcolor":"#593930"},{"id":17,"type":"LoraLoader","pos":[-91.52296149579473,657.2420005072579],"size":{"0":315,"1":126},"flags":{},"order":7,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":19,"label":"模型"},{"name":"clip","type":"CLIP","link":20,"label":"CLIP"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[88,93],"shape":3,"slot_index":0,"label":"模型"},{"name":"CLIP","type":"CLIP","links":[78,80],"shape":3,"slot_index":1,"label":"CLIP"}],"properties":{"Node name for S&R":"LoraLoader"},"widgets_values":["角色\\Supergirl_DCfilm.safetensors",0.7000000000000001,0],"color":"#432","bgcolor":"#653"},{"id":41,"type":"EmptyLatentImage","pos":[-90.52296149579473,846.2420005072577],"size":{"0":315,"1":106},"flags":{},"order":0,"mode":0,"outputs":[{"name":"LATENT","type":"LATENT","links":[94],"shape":3,"label":"Latent","slot_index":0}],"properties":{"Node name for S&R":"EmptyLatentImage"},"widgets_values":[512,768,1],"color":"#432","bgcolor":"#653"},{"id":8,"type":"CheckpointLoaderSimple","pos":[-97.52296149579473,495.2420005072578],"size":{"0":345.335693359375,"1":99.14155578613281},"flags":{"collapsed":false,"pinned":false},"order":2,"mode":0,"outputs":[{"name":"MODEL","type":"MODEL","links":[19,99],"slot_index":0,"label":"模型"},{"name":"CLIP","type":"CLIP","links":[20],"slot_index":1,"label":"CLIP"},{"name":"VAE","type":"VAE","links":[10],"slot_index":2,"label":"VAE"}],"properties":{"Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["realistic\\henmixReal_v5c.safetensors"],"color":"#432","bgcolor":"#653"},{"id":35,"type":"CLIPSetLastLayer","pos":[298.4770385042052,511.2420005072578],"size":{"0":315,"1":58},"flags":{"pinned":false},"order":8,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":78,"label":"CLIP"}],"outputs":[{"name":"CLIP","type":"CLIP","links":[79,100],"shape":3,"label":"CLIP","slot_index":0}],"properties":{"Node name for S&R":"CLIPSetLastLayer"},"widgets_values":[-2],"color":"#432","bgcolor":"#653"},{"id":42,"type":"VAELoader","pos":[664.4770385042051,499.2420005072578],"size":{"0":368.82476806640625,"1":58},"flags":{},"order":3,"mode":0,"outputs":[{"name":"VAE","type":"VAE","links":[96,101],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VAELoader"},"widgets_values":["vae-ft-mse-840000-ema-pruned.safetensors"],"color":"#432","bgcolor":"#653"},{"id":37,"type":"CLIPTextEncode","pos":[269.4770385042052,892.2420005072577],"size":{"0":400,"1":200},"flags":{},"order":9,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":80,"label":"CLIP"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[81,87,104,105],"shape":3,"label":"条件","slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["(worst quality, low quality:1.4),watermark,signature,EasyNegative,badhandv4,\n"],"color":"#322","bgcolor":"#533"},{"id":36,"type":"CLIPTextEncode","pos":[262.47703850420527,636.2420005072579],"size":{"0":400,"1":200},"flags":{},"order":10,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":79,"label":"CLIP"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[82,86],"shape":3,"label":"条件","slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["8k,best quality,real picture,intricate details,ultra-detailed,ultra highres,depth field,(photorealistic,realistic:1.2),masterpiece,solo,\n1girl,expressionless eyes,supergirl,blue eyes,blonde hair,long hair,(red_cape),(red_skirt),(red_thigh_boots),(black_pantyhose:1.2),blush,shy,seductive smile,superhero,looking at viewer,best quality,realistic,photorealistic,(intricate details:1.2),(delicate detailed),(cinematic light),clear line,\nunity 8k wallpaper,ultra high res,(photorealistic:1.4),\n"],"color":"#232","bgcolor":"#353"},{"id":2,"type":"UltimateSDUpscale","pos":[2187.096132107087,570.8435855224549],"size":{"0":314.0106506347656,"1":826},"flags":{},"order":16,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":115,"label":"图像"},{"name":"model","type":"MODEL","link":93,"label":"模型"},{"name":"positive","type":"CONDITIONING","link":82,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":81,"label":"负面条件"},{"name":"vae","type":"VAE","link":10,"label":"VAE"},{"name":"upscale_model","type":"UPSCALE_MODEL","link":2,"label":"放大模型"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[95],"shape":3,"slot_index":0,"label":"图像"}],"properties":{"Node name for S&R":"UltimateSDUpscale"},"widgets_values":[2.5,450390777697961,"randomize",30,7,"dpmpp_3m_sde","karras",0.35000000000000003,"Linear",1024,1024,12,64,"None",0.3,160,32,64,false,false],"color":"#223","bgcolor":"#335"},{"id":38,"type":"KSampler","pos":[687.4770385042051,628.2420005072579],"size":{"0":315,"1":474},"flags":{},"order":11,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":88,"label":"模型"},{"name":"positive","type":"CONDITIONING","link":86,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":87,"label":"负面条件"},{"name":"latent_image","type":"LATENT","link":94,"label":"Latent"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[89],"shape":3,"label":"Latent","slot_index":0}],"properties":{"Node name for S&R":"KSampler"},"widgets_values":[384640673793244,"randomize",20,8,"dpmpp_2m","karras",1],"color":"#432","bgcolor":"#653"},{"id":40,"type":"PreviewImage","pos":[1033.4770385042054,596.2420005072579],"size":{"0":319.6097412109375,"1":526.4111328125},"flags":{},"order":13,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":90,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"},"color":"#432","bgcolor":"#653"},{"id":39,"type":"VAEDecode","pos":[1089.4770385042054,500.2420005072578],"size":{"0":210,"1":46},"flags":{},"order":12,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":89,"label":"Latent"},{"name":"vae","type":"VAE","link":96,"label":"VAE","slot_index":1}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[90,114],"shape":3,"label":"图像","slot_index":0}],"properties":{"Node name for S&R":"VAEDecode"},"color":"#432","bgcolor":"#653"},{"id":34,"type":"SaveImage","pos":[2559.2536663637247,599.7839642959619],"size":{"0":662.8106689453125,"1":1036.0780029296875},"flags":{},"order":18,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":97,"label":"图像"}],"properties":{"Node name for S&R":"SaveImage","ttNbgOverride":{"color":"#332922","bgcolor":"#593930","groupcolor":"#b06634"}},"widgets_values":["ComfyUI"],"color":"#223","bgcolor":"#335"},{"id":49,"type":"SAMLoader","pos":[1426.0362994294724,498.7738147079848],"size":{"0":315,"1":82},"flags":{},"order":4,"mode":0,"outputs":[{"name":"SAM_MODEL","type":"SAM_MODEL","links":[108],"shape":3,"label":"SAM模型"}],"properties":{"Node name for S&R":"SAMLoader"},"widgets_values":["sam_vit_b_01ec64.pth","Prefer GPU"]},{"id":47,"type":"PreviewImage","pos":[1590.0362994294724,1810.7738147079851],"size":[352.7917295208017,643.0254537695604],"flags":{},"order":15,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":106,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":44,"type":"FaceDetailer","pos":[1529.0362994294724,638.7738147079849],"size":[506.4000244140625,1100],"flags":{},"order":14,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":114,"label":"图像"},{"name":"model","type":"MODEL","link":99,"label":"模型"},{"name":"clip","type":"CLIP","link":100,"label":"CLIP"},{"name":"vae","type":"VAE","link":101,"label":"VAE"},{"name":"positive","type":"CONDITIONING","link":104,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":105,"label":"负面条件"},{"name":"bbox_detector","type":"BBOX_DETECTOR","link":117,"label":"BBox检测","slot_index":6},{"name":"sam_model_opt","type":"SAM_MODEL","link":108,"label":"SAM模型","slot_index":7},{"name":"segm_detector_opt","type":"SEGM_DETECTOR","link":null,"label":"Segm检测"},{"name":"detailer_hook","type":"DETAILER_HOOK","link":null,"label":"细化约束"}],"outputs":[{"name":"image","type":"IMAGE","links":[106,115],"shape":3,"label":"图像","slot_index":0},{"name":"cropped_refined","type":"IMAGE","links":null,"shape":6,"label":"细化图像"},{"name":"cropped_enhanced_alpha","type":"IMAGE","links":null,"shape":6,"label":"细化部分"},{"name":"mask","type":"MASK","links":null,"shape":3,"label":"遮罩"},{"name":"detailer_pipe","type":"DETAILER_PIPE","links":null,"shape":3,"label":"细化节点束"},{"name":"cnet_images","type":"IMAGE","links":null,"shape":6,"label":"ControlNet图像"}],"properties":{"Node name for S&R":"FaceDetailer"},"widgets_values":[384,true,1024,41556388314686,"randomize",20,8,"euler","normal",0.4,5,true,true,0.5,10,3,"center-1",8,1,459,0.7,"False",10,"",1,false,20]},{"id":52,"type":"UltralyticsDetectorProvider","pos":[1774.0362994294744,497.7738147079848],"size":{"0":315,"1":78},"flags":{},"order":5,"mode":0,"outputs":[{"name":"BBOX_DETECTOR","type":"BBOX_DETECTOR","links":[117],"shape":3,"label":"BBox检测","slot_index":0},{"name":"SEGM_DETECTOR","type":"SEGM_DETECTOR","links":[],"shape":3,"label":"SEGM检测","slot_index":1}],"properties":{"Node name for S&R":"UltralyticsDetectorProvider"},"widgets_values":["bbox/face_yolov8m.pt"]},{"id":5,"type":"UpscaleModelLoader","pos":[2163.484022457471,460.3316721475244],"size":{"0":384.0982360839844,"1":58},"flags":{"collapsed":false},"order":1,"mode":0,"outputs":[{"name":"UPSCALE_MODEL","type":"UPSCALE_MODEL","links":[2],"slot_index":0,"label":"放大模型"}],"properties":{"Node name for S&R":"UpscaleModelLoader"},"widgets_values":["8x_NMKD-Superscale_150000_G.pth"],"color":"#223","bgcolor":"#335"},{"id":54,"type":"Note","pos":[1433,117],"size":[616.8445374999992,199.5892753906246],"flags":{"pinned":false},"order":6,"mode":0,"title":"面部修复需知","properties":{"text":""},"widgets_values":["SAM模型和BBox面部检测模型需要下载并放置到指定目录：ComfyUI/models/sams 与 ComfyUI/models/mmdets/bbox下，并重启comfyUI\n模型链接\nhttps://pan.baidu.com/s/1-gSdsI3VXCuGxrjf7v0eoA?pwd=rjgf 提取码: rjgf "],"color":"#2a363b","bgcolor":"#3f5159"}],"links":[[2,5,0,2,5,"UPSCALE_MODEL"],[10,8,2,2,4,"VAE"],[19,8,0,17,0,"MODEL"],[20,8,1,17,1,"CLIP"],[78,17,1,35,0,"CLIP"],[79,35,0,36,0,"CLIP"],[80,17,1,37,0,"CLIP"],[81,37,0,2,3,"CONDITIONING"],[82,36,0,2,2,"CONDITIONING"],[86,36,0,38,1,"CONDITIONING"],[87,37,0,38,2,"CONDITIONING"],[88,17,0,38,0,"MODEL"],[89,38,0,39,0,"LATENT"],[90,39,0,40,0,"IMAGE"],[93,17,0,2,1,"MODEL"],[94,41,0,38,3,"LATENT"],[95,2,0,20,0,"*"],[96,42,0,39,1,"VAE"],[97,20,0,34,0,"IMAGE"],[99,8,0,44,1,"MODEL"],[100,35,0,44,2,"CLIP"],[101,42,0,44,3,"VAE"],[104,37,0,44,4,"CONDITIONING"],[105,37,0,44,5,"CONDITIONING"],[106,44,0,47,0,"IMAGE"],[108,49,0,44,7,"SAM_MODEL"],[114,39,0,44,0,"IMAGE"],[115,44,0,2,0,"IMAGE"],[117,52,0,44,6,"BBOX_DETECTOR"]],"groups":[{"title":"高清修复","bounding":[2146,375,1168,1305],"color":"#88A","font_size":24,"locked":false},{"title":"SD1.5基础出图","bounding":[-117,378,1482,907],"color":"#b58b2a","font_size":24,"locked":false},{"title":"面部修复","bounding":[1408,372,704,2108],"color":"#3f789e","font_size":24,"locked":false}],"config":{},"extra":{},"version":0.4}