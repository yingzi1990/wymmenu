{"last_node_id":92,"last_link_id":147,"nodes":[{"id":1,"type":"MagicAnimateModelLoader","pos":[228,357],"size":{"0":523.0929565429688,"1":130},"flags":{},"order":0,"mode":0,"outputs":[{"name":"MAGIC_ANIMATE_MODEL","type":"MAGIC_ANIMATE_MODEL","links":[1],"shape":3,"slot_index":0,"label":"MAGIC_ANIMATE_MODEL"}],"properties":{"Node name for S&R":"MagicAnimateModelLoader"},"widgets_values":["densepose_controlnet/diffusion_pytorch_model.safetensors","appearance_encoder/diffusion_pytorch_model.safetensors","temporal_attention/temporal_attention.ckpt","cuda"],"serialize_values":[null,null,null,null]},{"id":80,"type":"PreviewImage","pos":[1390.4834289550781,487.803466796875],"size":{"0":210,"1":26},"flags":{},"order":8,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":133,"label":"images"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":47,"type":"VHS_VideoCombine","pos":[1285,770],"size":[944.1447143554688,1188.1447143554688],"flags":{},"order":16,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":112,"label":"images"},{"name":"audio","type":"VHS_AUDIO","link":null,"label":"audio"}],"outputs":[{"name":"Filenames","type":"VHS_FILENAMES","links":null,"shape":3,"label":"Filenames","slot_index":0}],"properties":{"Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":12,"loop_count":0,"filename_prefix":"AnimateDiff","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":20,"save_metadata":true,"pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"https://boss.aikobo.cn/aigc-public/8670aca7661aa48aace6dfd9cdb036863d92ae21e0bf695b333226042122025d.mp4","subfolder":"","type":"output","format":"video/mp4"}}},"color":"#233","bgcolor":"#355","serialize_values":[null,null,"AnimateDiff",null,null,null,null,null,null,null]},{"id":4,"type":"VHS_LoadVideo","pos":[241,574],"size":[322.02020263671875,765.1470269097222],"flags":{},"order":1,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3],"shape":3,"slot_index":0,"label":"IMAGE"},{"name":"frame_count","type":"INT","links":null,"shape":3,"label":"frame_count"},{"name":"audio","type":"VHS_AUDIO","links":null,"shape":3,"label":"audio"}],"properties":{"Node name for S&R":"VHS_LoadVideo"},"widgets_values":{"video":"https://bfs.esheep.com/bfs/aikobo-bfs/app/comfy/d696800a8843ffb0860562650d22d77bfbe0c58c.mp4","force_rate":0,"force_size":"Disabled","custom_width":512,"custom_height":512,"frame_load_cap":24,"skip_first_frames":0,"select_every_nth":1,"choose video to upload":"image","videopreview":{"hidden":false,"paused":false,"params":{"filename":"https://bfs.esheep.com/bfs/aikobo-bfs/app/comfy/d696800a8843ffb0860562650d22d77bfbe0c58c.mp4","type":"input","format":"video/mp4","frame_load_cap":24,"skip_first_frames":0,"force_rate":0,"select_every_nth":1}}},"serialize_values":[null,null,null,null,null,null,null,null,null,null]},{"id":40,"type":"ColorMatch","pos":[1500,352],"size":{"0":315,"1":78},"flags":{},"order":15,"mode":0,"inputs":[{"name":"image_ref","type":"IMAGE","link":55,"label":"image_ref"},{"name":"image_target","type":"IMAGE","link":147,"label":"image_target"}],"outputs":[{"name":"image","type":"IMAGE","links":[112],"shape":3,"slot_index":0,"label":"image"}],"properties":{"Node name for S&R":"ColorMatch"},"widgets_values":["mkl"],"serialize_values":[null]},{"id":2,"type":"MagicAnimate","pos":[877,358],"size":{"0":317.4000244140625,"1":146},"flags":{},"order":5,"mode":0,"inputs":[{"name":"magic_animate_model","type":"MAGIC_ANIMATE_MODEL","link":1,"slot_index":0,"label":"magic_animate_model"},{"name":"image","type":"IMAGE","link":39,"slot_index":1,"label":"image"},{"name":"pose_video","type":"IMAGE","link":3,"label":"pose_video"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[133,144],"shape":3,"slot_index":0,"label":"IMAGE"}],"properties":{"Node name for S&R":"MagicAnimate"},"widgets_values":[0,"randomize",25],"serialize_values":[null,null,null]},{"id":84,"type":"UpscaleModelLoader","pos":[151,-174],"size":{"0":323.4912109375,"1":58},"flags":{"collapsed":false},"order":2,"mode":0,"outputs":[{"name":"UPSCALE_MODEL","type":"UPSCALE_MODEL","links":[136],"shape":3,"label":"UPSCALE_MODEL"}],"properties":{"Node name for S&R":"UpscaleModelLoader"},"widgets_values":["RealESRGAN_x4plus.pth"],"serialize_values":[null]},{"id":87,"type":"ConstrainImage|pysssss","pos":[262,29],"size":{"0":315,"1":154},"flags":{},"order":9,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":144,"label":"images"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[135,145],"shape":6,"slot_index":0,"label":"IMAGE"}],"properties":{"Node name for S&R":"ConstrainImage|pysssss"},"widgets_values":[768,768,384,384,"no"],"serialize_values":[null,null,null,null,null]},{"id":82,"type":"ReActorFaceSwap","pos":[729,-112],"size":{"0":315,"1":338},"flags":{},"order":12,"mode":0,"inputs":[{"name":"source_image","type":"IMAGE","link":134,"label":"source_image"},{"name":"input_image","type":"IMAGE","link":135,"label":"input_image"},{"name":"face_model","type":"FACE_MODEL","link":null,"label":"face_model"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[137],"shape":3,"slot_index":0,"label":"IMAGE"},{"name":"FACE_MODEL","type":"FACE_MODEL","links":null,"shape":3,"label":"FACE_MODEL"}],"properties":{"Node name for S&R":"ReActorFaceSwap"},"widgets_values":[true,"inswapper_128.onnx","YOLOv5l","codeformer.pth",1,0.5,"no","no",0,"0",1],"serialize_values":[null,null,null,null,null,null,null,null,null,null,null]},{"id":91,"type":"PreviewImage","pos":[1127,29],"size":{"0":210,"1":26},"flags":{},"order":11,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":145,"label":"images"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":92,"type":"PreviewImage","pos":[1802.7391179173176,-467.15756688380634],"size":{"0":384.8977966308594,"1":521.5905151367188},"flags":{},"order":14,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":146,"label":"images"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":83,"type":"ImageUpscaleWithModel","pos":[1207,-282],"size":{"0":241.79998779296875,"1":46},"flags":{"collapsed":false},"order":13,"mode":0,"inputs":[{"name":"upscale_model","type":"UPSCALE_MODEL","link":136,"slot_index":0,"label":"upscale_model"},{"name":"image","type":"IMAGE","link":137,"label":"image"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[146,147],"shape":3,"slot_index":0,"label":"IMAGE"}],"properties":{"Node name for S&R":"ImageUpscaleWithModel"}},{"id":86,"type":"Image Flip","pos":[760,-801],"size":{"0":315,"1":58},"flags":{},"order":6,"mode":4,"inputs":[{"name":"images","type":"IMAGE","link":138,"label":"images"}],"outputs":[{"name":"images","type":"IMAGE","links":[],"shape":3,"slot_index":0,"label":"images"}],"properties":{"Node name for S&R":"Image Flip"},"widgets_values":["horizontal"],"serialize_values":[null]},{"id":89,"type":"ConstrainImage|pysssss","pos":[705,-634],"size":{"0":315,"1":154},"flags":{},"order":7,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":142,"label":"images"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[140],"shape":6,"slot_index":0,"label":"IMAGE"}],"properties":{"Node name for S&R":"ConstrainImage|pysssss"},"widgets_values":[512,512,256,256,"no"],"serialize_values":[null,null,null,null,null]},{"id":88,"type":"CR Image Input Switch","pos":[639,-382],"size":{"0":315,"1":78},"flags":{},"order":10,"mode":0,"inputs":[{"name":"image1","type":"IMAGE","link":140,"label":"image1"},{"name":"image2","type":"IMAGE","link":141,"label":"image2"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[134],"shape":3,"slot_index":0,"label":"IMAGE"},{"name":"show_help","type":"STRING","links":null,"shape":3,"label":"show_help"}],"properties":{"Node name for S&R":"CR Image Input Switch"},"widgets_values":[1],"serialize_values":[null]},{"id":3,"type":"LoadImage","pos":[698,642],"size":{"0":431.0559997558594,"1":529.514892578125},"flags":{},"order":3,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[39,55],"shape":3,"slot_index":0,"label":"IMAGE"},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"MASK"}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["https://bfs.esheep.com/bfs/aikobo-bfs/app/comfy/7fc4351ba53896bdaf0adff858e23906d0359fa4.jpg","image"],"serialize_values":[null,null]},{"id":81,"type":"LoadImage","pos":[150,-628],"size":{"0":396.3879089355469,"1":350.98406982421875},"flags":{},"order":4,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[138,141,142],"shape":3,"slot_index":0,"label":"IMAGE"},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"MASK"}],"title":"Face image","properties":{"Node name for S&R":"LoadImage"},"widgets_values":["https://bfs.esheep.com/bfs/aikobo-bfs/app/comfy/8dccba1d47a88d4b9b4314d2cd47ac61851598d1.jpg","image"],"serialize_values":[null,null]}],"links":[[1,1,0,2,0,"MAGIC_ANIMATE_MODEL"],[3,4,0,2,2,"IMAGE"],[39,3,0,2,1,"IMAGE"],[55,3,0,40,0,"IMAGE"],[112,40,0,47,0,"IMAGE"],[133,2,0,80,0,"IMAGE"],[134,88,0,82,0,"IMAGE"],[135,87,0,82,1,"IMAGE"],[136,84,0,83,0,"UPSCALE_MODEL"],[137,82,0,83,1,"IMAGE"],[138,81,0,86,0,"IMAGE"],[140,89,0,88,0,"IMAGE"],[141,81,0,88,1,"IMAGE"],[142,81,0,89,0,"IMAGE"],[144,2,0,87,0,"IMAGE"],[145,87,0,91,0,"IMAGE"],[146,83,0,92,0,"IMAGE"],[147,83,0,40,1,"IMAGE"]],"groups":[{"title":"Group","bounding":[120,-722,2134,976],"color":"#3f789e","font_size":24,"locked":true},{"title":"Magic Animate","bounding":[121,264,2131,936],"color":"#3f789e","font_size":24,"locked":true}],"config":{},"extra":{},"version":0.4}